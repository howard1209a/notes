---
title: float和double的存储
date: 2023-10-29 13:25:22
tags: [计算机组成原理, 八股文]
---

# float 和 double 的存储

## 浮点数存储方式

符号位+尾数+阶码的存储方式，符号位占 1bit 表示正负，尾数表示数值，阶码表示 2 的多少次方。对于一个非 0 的二进制小数，首先确定符号位，然后我们可以把它调整成 1.XXX 这种形式，去掉 1.后面就是尾数，超出的部分直接舍去，其次就是调整过程中乘的阶码，阶码可正可负，比如阶码有 8 位，就是-127 到 128。

## 为什么会出现误差

首先十进制整数和二进制整数是一一对应的，因此 long、int、short、byte 等只要不溢出是不会出现误差的。

而 float 和 double 会出现误差的原因是，大部分十进制有限小数在二进制中是无限小数，而浮点数在内存中是以尾数+阶码的方式保存的，有一定的精度范围，因此二进制无限小数会被截断从而损失精度，更进一步的，两个以尾数+阶码的方式存储的浮点数进行加减乘除运算的过程也可能出现精度之外的溢出。当然由于所有二进制的有限小数在十进制中都是有限小数，所以如果前面两个地方都没出现精度损失，那么运算结果作为二进制有限小数可以转化为十进制有限小数，这一步是不会出现误差的。
