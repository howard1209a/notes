---
title: 对称性加密与非对称性加密
date: 2023-10-29 13:16:01
tags: [计算机基础, 计算机网络, 八股文]
---

# 对称性加密与非对称性加密

### 对称性加密

客户端和服务端采用同种加密算法，网络传输的是密文，缺点是中间节点知道了加密算法仍可以截获数据包并解密出明文，是不安全的。

### 加入动态因子的对称性加密

客户端和服务端仍采用同种加密算法，但加密算法中加入了动态因子，这也意味着如果中间节点不知道动态因子是不可以解密的，但是动态因子最初也需要从一方传递给另一方，这个传递只能采用普通的对称性加密，因此动态因子有被截获的可能，所以仍然不安全。

### 非对称性加密

由服务器生成一对公钥和密钥，公钥加密后公钥不可解密只有私钥可以解密，私钥加密后公钥可以解密，客户端发起 https 请求时会首先去服务器默认的 443 端口请求一份公钥，这个公钥是公共的，任意中间节点截获查看都不会有影响。接下来客户端发送的 http 请求会经过公钥加密，其他有公钥的节点截获后是无法解密的，服务器可以用私钥解密，服务器发送的 http 响应会经过私钥的加密，其他节点可以用公钥解密，但是一旦解密就无法再次加密（因为其他节点没有服务器私钥），所以这个信息就不会被客户端正常接收。

非对称性加密存在一个安全问题：如果客户端在请求服务器公钥的时候，有一个中间的虚假服务器返回了假公钥并向真实服务器请求了真公钥，这个过程客户端是不知道的，客户端认为自己在和真实服务器通信，但其实客户端用假公钥加密的 http 请求到达虚假服务器后被假私钥解密，然后用真公钥加密再发给真实服务器，真实服务器返回给虚假服务器的 http 响应先被真公钥解密再通过假私钥加密然后发给客户端，客户端用假公钥解密。

这也是为什么只是自己给服务器配了私钥公钥后，浏览器会提示是不安全的 https 连接。

### 非对称性加密+CA 机构

非对称性加密存在的安全问题可以被 CA 机构解决，CA 机构支持为服务器付费生成并颁发数字证书，用户请求某个服务器的公钥时可以直接从服务器 443 端口拿到证书。那么 CA 机构是如何保证服务器公钥不被篡改地返回客户端的呢？CA 机构本身也有着自己的公钥私钥，但是 CA 机构的公钥是内置在所有用户的操作系统里面的（因此客户端可以不经过网络就知道 CA 机构的公钥），服务器返回的证书是经过 CA 机构私钥加密后的服务器公钥，如果有中间节点拦截了这个数据包并利用自己操作系统中内置的 CA 机构公钥进行解密，虽然能够获知某个服务器的公钥，但是由于中间节点不知道 CA 机构服务器的私钥因此没有办法重新加密，因此中间节点也就不能篡改服务器公钥的发放。

### 非对称性加密+CA 机构+自签名

自签名指的是服务器自己作为自己的 CA 机构，完成 CA 机构的工作，这里 CA 机构公钥一般使用的都是客户端普遍内置的公钥。对于服务器来说，自己进行的自签名证书是可以保证服务器与客户端的安全通信的，但是客户端可能认为自签名证书 https 连接是不安全的，因为不是权威 CA 机构。
