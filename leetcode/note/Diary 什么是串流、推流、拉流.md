---
title: 什么是串流、推流、拉流
date: 2023-10-29 13:21:44
tags: [日常笔记]
---

# 什么是串流、推流、拉流

#### 基本概念

1. 通过摄像头或录屏功能进行视频采集，视频的原始数据格式是一个个 RGB 帧或 YUV 帧，通过话筒进行音频采集，音频的原始数据格式是离散数据 PCM

2. 将视频的原始数据格式（一个个 RGB 帧）进行编码（比如编码成 h.264 格式），将音频的原始数据格式（PCM）进行编码（比如编码成 AAC 格式），音视频编码的意义在于，在不损失音视频质量或一定的损失限度内尽可能地压缩数据量大小。

3. 将编码后的视频数据、音频数据以及元数据组合为多媒体容器格式，多媒体容器格式有支持流媒体特性的和不支持流媒体特性的。支持流媒体特性的多媒体容器格式有 flv、ts 等，不支持流媒体特性的、面向存储的多媒体容器格式 avi、asf（wma/wmv）、mp4、mkv、rmvb（rm/ra）等。这里拿 mp4 举例，mp4 作为一个不支持流媒体特性的、面向存储的多媒体容器，mp4 视频文件只能丢给播放器进行解封装和解码，然后同步并播放，mp4 视频文件本身通过网络传输的话，它对于网络传输来说只是一个二进制文件，只能进行整个文件的传输，比如利用迅雷下载一个服务器上的电影，下载完整个 mp4 视频后可以丢给播放器播放。如果希望流式传输 mp4 视频，则需要先将其转换为支持流媒体特性的多媒体容器格式如 flv。

   ```shell
   ffmpeg -re -i "xxxx.mp4" -vcodec libx264 -acodec aac -f flv rtmp://xxx.xxx.xxx.xxx:Xxx/xxxx
   # -f flv表示将mp4容器格式转化为flv容器格式，rtmp协议只支持flv流媒体容器格式
   ```

   而对于支持流媒体特性的多媒体容器格式（如 flv），它们支持流媒体传输协议（如 rtmp 协议）从容器中取出一个个小的数据包，每个数据包里面可能只包括几帧的视频数据、对应的音频数据和元数据，并通过网络传输。常用的流传输协议有 RTSP、RTMP、HLS 等。

4. 网络的另一端在收到一个个数据包进行前面的逆过程，解封装产生音视频数据和元数据、解码生成原始数据格式的视频（RGB 帧）和音频（PCM）、缓存、同步、播放，达到实时播放的效果。

**可以看下这篇文章：**[做直播，我们是认真的：Web 音视频串流与 WebRTC - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/542144590)

#### 推流与拉流（都是串流）

**推流：**将视频文件或者实时录制的视频数据按照特定的支持流媒体特性的多媒体容器格式以及特定的流媒体传输协议，流式推送到服务器或网络的另一端。

**拉流：**请求服务器发送服务器上缓存的某个实时视频流数据（从推流端的容器中实时取出的一个个小的数据包），即流式地拉取，实时地播放。

**在直播业务中为什么主播会推流到流媒体服务器而不是直接推流到观看用户的客户端：**因为主播端的推流设备无法高并发地响应成千上万用户的拉流请求，而推到流媒体服务器后，服务器是具有这种能力的，另外流媒体服务器还具有转码、录制回放、监管鉴黄等功能。

![](D:\Desktop\Dasi\Yan0\图片\什么是串流、推流、拉流-p2.png)

![](D:\Desktop\Dasi\Yan0\图片\什么是串流、推流、拉流-p1.png)

#### 点播与组播

点播：通过优酷观看视频，流式传输的是流媒体服务器上的视频

组播：通过斗鱼观看直播，流式传输的是流媒体服务器上缓存的某主播的实时视频数据

#### 网络流媒体协议的联系与区别

![](D:\Desktop\Dasi\Yan0\图片\什么是串流、推流、拉流-p3.png)

**主要看下面这篇文章：**

[(110 条消息) 网络流媒体协议的联系与区别(RTP RTCP RTSP RTMP HLS)*音视频开发老马的博客-CSDN 博客*流媒体协议对比](https://blog.csdn.net/yinshipin007/article/details/126752517)

#### 参考文章

[(110 条消息) 【流媒体】推流与拉流简介*No8g 攻城狮的博客-CSDN 博客*推流和拉流](https://blog.csdn.net/weixin_44299027/article/details/122711869)

[(10 封私信 / 80 条消息) 什么是串流（Streaming）？ - 知乎 (zhihu.com)](https://www.zhihu.com/question/359315470/answer/922995305?ivk_sa=1024320u)

[(110 条消息) 多媒体容器格式概述 ①_weixin_30795127 的博客-CSDN 博客](https://blog.csdn.net/weixin_30795127/article/details/97887249)

[多媒体容器格式的变迁，体现着我们对美好事物的不断追求 (baidu.com)](https://baijiahao.baidu.com/s?id=1648291079053253824&wfr=spider&for=pc)

[(10 封私信 / 80 条消息) 直播间如何搭建？ - 知乎 (zhihu.com)](https://www.zhihu.com/question/447381364/answer/2823303501?utm_id=0)
