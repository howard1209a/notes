---
title: 广搜与深搜总结
date: 2023-11-12 19:47:37
tags: [Leetcode总结]
---

# 广搜与深搜总结

所有图论题目的核心考点都是如何将题目信息抽象为一个有向图/无向图，至于抽象成图之后如何去做，基本是很固定的套路了。

## 无向图

主要有两种无向图，一种是有环的，一种是连通无环的（也就是树）

### 深度优先搜索 DFS

#### 方式一：

所有搜过的点都不再搜，当且仅当没有连接的点或所有连接的点都已搜过的时候回溯。最终结果是遍历搜索起始点所在的连通分量上的所有点各一次，并针对每个点都得出一条路径（不一定是最短路径）。上述结论适用于有环/无环的无向图。

- 可用来判断两点之间是否可达
- 可用来找到两点之间的一条路径（不一定最短）

#### 方式二：

不可以重复访问当前已走过路径上的点，当且仅当没有连接的点或所有连接的点都已经在已走过路径上的时候回溯。最终结果是得到从搜索起始点开始走，保证不重复访问已走过路径上的点的条件下，所能走出的所有路径。上述结论适用于有环/无环的无向图。

- 可用来找不重复访问已走过路径条件下的所有路径
- 可用来找两点间的所有路径

#### 方式三：

不回头的走，即除非回溯，否则不往来时的节点走。当且仅当到达悬挂点（度为 1 的点）时才可以回溯。最终结果是得到从搜索起始点开始走，不回头的走所能走出的所有路径。只适用于无环无向图（也就是树），如果应用于有环无向图，则会无限循环。

- 可用来找从树中（把树当作图看待）任意节点出发所能走出的所有路径
- 可用来找树中（把树当作图看待）任意两节点间的唯一一条路径

### 广度优先搜索 BFS

#### 方式一：

所有搜过的点都不再搜，每次队头节点出队后，此节点连接的所有节点中，未进过队的节点才可以进队。最终结果是遍历搜索起始点所在的连通分量上的所有点各一次，并针对每个点都得出一条最短路径。上述结论适用于有环/无环的无向图。

- 可用来判断两点之间是否可达
- 可用来找到两点之间的一条最短路径

#### 方式二：

不可以重复访问当前已走过路径上的点，每次队头节点出队后，此节点连接的所有节点中，不在队头节点走过的分支路径上的点才可以进队。最终结果是得到从搜索起始点开始走，保证不重复访问已走过路径上的点的条件下，所能走出的所有路径。上述结论适用于有环/无环的无向图。

注意这种方式下 BFS 和 DFS 找到的所有路径完全一致，和方式一不同，BFS 不会去找最短路径。

- 可用来找不重复访问已走过路径条件下从起点出发的所有路径
- 可用来找两点间的所有路径

#### 方式三：

不回头的走，每次队头节点出队后，此节点连接的所有节点中，除去来时节点的所有节点都可以进队。最终结果是得到从搜索起始点开始走，不回头的走所能走出的所有路径。只适用于无环无向图（也就是树），如果应用于有环无向图，则会无限循环。

- 可用来找从树中（把树当作图看待）任意节点出发所能走出的所有路径
- 可用来找树中（把树当作图看待）任意两节点间的唯一一条路径

## 有向图

### 深度优先搜索

#### 方式一：

所有搜过的点都不再搜，当且仅当没有可走的点或所有可走的点都已经搜过的时候才回溯。最终结果是访问搜索起始点所能到达的所有点各一次，注意并不是访问强连通分量（强连通分量中任意两点相互可达）上的点各一次，这和无向图的情况是不同的。需要说明的是，搜到的所有点中任意一点所能到达的所有点也必然全在搜索结果中，这可以用反证法证明，如果搜索结果中的某个点存在一个搜索结果之外的可到达点，那么这个点必然会被 DFS 搜到，矛盾。以上结论同时适用于有环/无环有向图。
